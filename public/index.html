<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <meta name="description" content="Nova — AI Virtual Human with 3D avatar, real-time lip sync, voice & Gemini AI">
  <meta name="theme-color" content="#07070f">
  <title>Nova — AI Virtual Human</title>
  <link rel="stylesheet" href="index.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <script type="importmap">
  {
    "imports": {
      "three": "https://cdn.jsdelivr.net/npm/three@0.170.0/build/three.module.js",
      "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.170.0/examples/jsm/"
    }
  }
  </script>
</head>
<body>

<div class="app-container">

  <!--  3-D Avatar Viewport  -->
  <div class="avatar-section" id="avatar-section">
    <canvas id="avatar-canvas"></canvas>

    <!-- Top-left status pill -->
    <div class="avatar-overlay">
      <div class="status-indicator" id="status-indicator">
        <span class="status-dot"></span>
        <span class="status-text">Initializing</span>
      </div>
    </div>

    <!-- Centre thinking overlay -->
    <div class="thinking-indicator" id="thinking-indicator">
      <div class="thinking-spinner"></div>
      <span class="thinking-text">Nova is thinking</span>
    </div>

    <!-- Waveform bars -->
    <div class="waveform-container" id="waveform-container">
      <div class="waveform-bar"></div><div class="waveform-bar"></div>
      <div class="waveform-bar"></div><div class="waveform-bar"></div>
      <div class="waveform-bar"></div><div class="waveform-bar"></div>
      <div class="waveform-bar"></div><div class="waveform-bar"></div>
      <div class="waveform-bar"></div><div class="waveform-bar"></div>
      <div class="waveform-bar"></div><div class="waveform-bar"></div>
      <div class="waveform-bar"></div><div class="waveform-bar"></div>
      <div class="waveform-bar"></div><div class="waveform-bar"></div>
    </div>

    <!-- Subtitle strip -->
    <div class="subtitle-overlay" id="subtitle-overlay">
      <span class="subtitle-text" id="subtitle-text"></span>
    </div>

    <!-- Name tag -->
    <div class="avatar-nametag">
      <span class="nametag-name">Nova</span>
      <span class="nametag-role">AI Virtual Human</span>
    </div>
  </div>

  <!--  Chat Panel  -->
  <div class="chat-section">

    <!--  Header  -->
    <div class="chat-header">
      <div class="chat-header-info">
        <!-- Nova logo mark -->
        <div class="nova-mark">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
            <path d="M12 2C8.13 2 5 5.13 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26C17.81 13.47 19 11.38 19 9c0-3.87-3.13-7-7-7z" fill="white" opacity=".9"/>
            <path d="M9 21h6M10 21v1h4v-1" stroke="white" stroke-width="1.4" stroke-linecap="round"/>
          </svg>
        </div>
        <div class="nova-title-wrap">
          <h1>Nova AI</h1>
         
        </div>
      </div>

      <div class="header-controls">
        <!-- Voice selector -->
        <select id="voice-select" class="voice-select" title="Select TTS Voice">
          <option value="">Auto Voice</option>
        </select>

        <!-- Auto-speak toggle -->
        <label class="auto-speak-toggle" title="Auto-speak responses">
          <input type="checkbox" id="auto-speak-toggle" checked>
          <span>Voice</span>
        </label>

        <!-- Emotion badge -->
        <!-- <div class="emotion-badge" id="emotion-badge" title="Current emotion"> neutral</div> -->
      </div>
    </div>



    <!--  Messages  -->
    <div class="chat-messages" id="chat-messages">

    

      <!-- Greeting message -->
      <div class="message assistant-message">
        <div class="message-avatar">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2a5 5 0 0 1 5 5v1a5 5 0 0 1-10 0V7a5 5 0 0 1 5-5z"/>
            <path d="M2 20c0-3.87 3.13-7 7-7h6c3.87 0 7 3.13 7 7"/>
          </svg>
        </div>
        <div class="message-content">
          <p>Hello! I'm Nova, your AI virtual human. Type a message or click the microphone icon — I'll respond with voice, real-time lip sync, and facial expressions!</p>
          <span class="msg-time" id="greeting-time"></span>
        </div>
      </div>

    </div>

    <!--  Input Area  -->
    <div class="chat-input-area">
      <div class="input-card">
        <div class="input-row">
          <input type="text" id="chat-input" placeholder="Message Nova" autocomplete="off">

          <!-- Mic -->
          <button id="mic-button" title="Voice input" class="icon-button">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
              stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
              <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
              <line x1="12" y1="19" x2="12" y2="23"/>
              <line x1="8" y1="23" x2="16" y2="23"/>
            </svg>
          </button>

          <!-- Send -->
          <button id="send-button" title="Send (Enter)">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
              stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="22" y1="2" x2="11" y2="13"/>
              <polygon points="22 2 15 22 11 13 2 9 22 2"/>
            </svg>
          </button>
        </div>
      </div>
      <div class="input-hint">
        <span>Press <kbd>Enter</kbd> to send</span>
      </div>
    </div>

  </div><!-- end .chat-section -->

</div><!-- end .app-container -->

<script type="module" src="app.js"></script>
<script>
  // Stamp greeting time
  document.getElementById('greeting-time').textContent =
    new Date().toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});
</script>
</body>
</html>